<!DOCTYPE html>

<!--   thymeleaf -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>修改图书</title>

    <link rel="stylesheet" th:href="@{/js/layui/css/layui.css}">
    <script th:src="@{/js/layui/layui.js}"></script>
    <script th:src="@{/js/jquery-3.3.1.min.js}"></script>
</head>
<body>

<script>
    $(function () {
        //当触发确认保存按钮
        $("#button-update").click(function () {
            //收集参数
            var userName = $("#updateName").val();
            var userGender = $("#updategender").val();
            var userAddress = $("#updateaddress").val();
            var userPhone = $("#updatephone").val();

            //已经有判断表单是否为空

            $.ajax(
                {
                    url: "/user/update",
                    data: {
                        userName: userName,
                        userGender: userGender,
                        userAddress: userAddress,
                        userPhone: userPhone,
                    },
                    type: "post",
                    dataType: 'json',
                    //success代表下载数据成功后执行的操作
                    success: function (data) {
                        //如果code为1则controller执行成功
                        if (data == 1) {
                            //成功之后直接刷新页面
                            window.location="/user/bookList";
                        } else {

                        }
                    }
                }
            )
        });
    })
</script>


<!--修改模态窗口   -->

<div class="layui-row" id="popUpdateTest">
    <div class="layui-col-md10">
        <form class="layui-form layui-from-pane" action="" style="margin-top:20px">

            <div class="layui-form-item">
                <label class="layui-form-label">用户名:</label>
                <div class="layui-input-block">
                    <!--                    可在input 框中设置placeholder="请输入xxx" 为灰色点击消失效果-->
                    <input type="text" name="neweqptIdCode" style="width: 200px;" th:value="${user.userName}"
                           id="updateName"
                           required
                           lay-verify="required" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">性别:</label>
                <div class="layui-input-block">
                    <input type="text" name="gender" required lay-verify="required" style="width: 200px;"
                           th:value="${user.gender}"
                           id="updategender"
                           autocomplete="off" class="layui-input">
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">手机号:</label>
                <div class="layui-input-block">
                    <input type="text" name="phone" required lay-verify="required" style="width: 200px;"
                           id="updatephone"
                           th:value="${user.phone}"

                           autocomplete="off" class="layui-input">
                </div>
            </div>

            <!--            <div class="layui-form-item">-->
            <!--                <label class="layui-form-label">年龄:</label>-->
            <!--                <div class="layui-input-block">-->
            <!--                    <input type="date" name="birthday" required lay-verify="required" style="width: 200px;"-->
            <!--                           th:value="${user.birthday}"-->
            <!--                           autocomplete="off" class="layui-input">-->
            <!--                </div>-->
            <!--            </div>-->

            <div class="layui-form-item">
                <label class="layui-form-label">地址:</label>
                <div class="layui-input-block">
                    <input type="text" name="address" required lay-verify="required" style="width: 200px;"
                           th:value="${user.address}"
                           id="updateaddress"
                           autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" style="margin-top:40px">
                <div class="layui-input-block">
                    <button class="layui-btn  layui-btn-submit " lay-submit="" lay-filter="demo11" id="button-update">
                        确认修改
                    </button>
                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                </div>
            </div>
        </form>
    </div>
</div>

</body>
<script>
    layui.use('form', function () {
        var form = layui.form;


    });
</script>
</html>